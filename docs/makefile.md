# Compiler Flags Reference

| Flag                      | Purpose                                                      | Why It Matters for OS Development                                                                                                                                                           |
| ------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `-m32`                    | Generate 32-bit x86 code                                     | Targets 32-bit architecture. Modern 64-bit CPUs boot in 32-bit protected mode initially.                                                                                                    |
| `-fno-use-cxa-atexit`     | Disable C++ global destructor registration                   | Prevents compiler from calling `__cxa_atexit()` which requires runtime library support that doesn't exist in bare-metal kernel. Without this, linker would fail looking for `__dso_handle`. |
| `-nostdlib`               | Don't link standard C/C++ libraries (`libc`, `libstdc++`)    | Critical for freestanding environment. Standard libraries depend on OS syscalls (malloc, printf, etc.) that don't exist yet - you're building the OS!                                       |
| `-fno-builtin`            | Disable built-in function optimizations                      | Prevents GCC from replacing your functions with optimized libc versions (e.g., `memcpy`, `strlen`). In kernel space, you control all implementations.                                       |
| `-fno-rtti`               | Disable Run-Time Type Information (`typeid`, `dynamic_cast`) | RTTI requires vtables and runtime metadata. Saves binary size and avoids dependency on C++ runtime support (`__cxa_*` functions).                                                           |
| `-fno-exceptions`         | Disable C++ exception handling (`try`/`catch`/`throw`)       | Exception handling needs stack unwinding tables and runtime support. Kernels typically use error codes instead. Saves ~40KB+ in binary size.                                                |
| `-fno-leading-underscore` | Don't prefix symbols with underscore                         | ⚠️ Platform-specific. Usually not needed on Linux/ELF systems. Required on some BSD/macOS toolchains where symbols like `main` become `_main`.                                              |
